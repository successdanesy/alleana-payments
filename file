After the database and tables are ready, you need to get its unique address, known as a connection string. This string allows the Node.js
  application to find and authenticate with your database.

  If you are using Supabase:

   1. In the left sidebar, click on the Settings icon.
   2. Select "Database" from the settings menu.
   3. Under the "Connection string" section, find the URI field.
   4. Copy this value. It will look something like postgresql://postgres:[YOUR-PASSWORD]@[HOST]:[PORT]/postgres.

  4. Configure the Application

  Finally, you need to tell the application how to connect to your newly set up database.

   1. In the project directory, create a .env file by copying the .env.example file.
   2. Open the .env file and paste the connection string you copied as the value for DATABASE_URL.

  That's it! Once you complete these steps, your application will be connected to a fully prepared database when you run npm start.

  Step 1: Setup Postman Environment

  To make testing easier, we'll use a Postman Environment to store variables like the server address, user tokens, and IDs.

   1. In Postman, click the "Environments" tab on the left, then click the `+` button to create a new one. Name it "AIleana API".
   2. Add your first variable:
       * Variable: base_url
       * Initial Value: http://localhost:3000
   3. Save the environment (Ctrl/Cmd + S) and make sure it's selected in the top-right dropdown menu in Postman.

  Step 2: Register Two Users

  We need two users to simulate a call: a caller (User A) and a receiver (User B).

  Register User A

   1. Create a new request (+ button).
   2. Set the method to POST.
   3. Enter the URL: {{base_url}}/api/auth/register
   4. Go to the "Body" tab, select "raw" and "JSON". Paste the following:

   1     {
   2       "email": "usera@example.com",
   3       "password": "password123",
   4       "full_name": "User A"
   5     }

   {
    "email": "successdanesy@gmail.com",
    "password": "password123",
    "full_name": "Success Danesy"
}
   5. Click "Send". You should get a 201 Created response containing a token and user id.
   6. Save the Token and ID: In the response window, highlight the token value, right-click, and select Set: AIleana API > Set as new
      variable. Name it user_a_token. Do the same for the id value and name it user_a_id.

  Register User B

   1. Duplicate the previous request tab.
   2. Change the body to:
   1     {
   2       "email": "userb@example.com",
   3       "password": "password456",
   4       "full_name": "User B"
   5     }

   {
    "email": "anyiway15@gmail.com",
    "password": "password456",
    "full_name": "ifeanyi john"
}
   3. Click "Send".
   4. From this response, save the id as a new environment variable named user_b_id.

  Step 3: Fund User A's Wallet

  Calls cost money, so we need to fund User A's wallet. This is a two-step process.

  Part 1: Initiate Funding

   1. Create a new request: POST {{base_url}}/api/wallet/fund
   2. Go to the "Authorization" tab, select "Bearer Token", and paste {{user_a_token}} in the token field.
   3. Go to the "Body" tab (raw, JSON) and add the amount:
   1     {
   2       "amount": 500
   3     }
   4. Click "Send".
   5. From the 200 OK response, save the reference value as a variable named transaction_reference.

  Part 2: Simulate Payment Webhook

   1. Create a new request: POST {{base_url}}/api/wallet/webhook
   2. This is a public endpoint, so no authorization is needed.
   3. In the "Body" (raw, JSON), simulate the payment provider's confirmation:
   1     {
   2       "reference": "{{transaction_reference}}",
   3       "status": "PAID",
   4       "amount": 500
   5     }
   4. Click "Send". You should get a 200 OK with the message "Payment confirmed".

  Verify Balance

   1. Create a new request: GET {{base_url}}/api/wallet
   2. Set Authorization to Bearer Token {{user_a_token}}.
   3. Click "Send". The response should show User A's balance is now 500.00.

  Step 4: Make a Call

  Now let's simulate the call from User A to User B.

  1. User A Initiates the Call

   1. Create a new request: POST {{base_url}}/api/calls/initiate
   2. Set Authorization to Bearer Token {{user_a_token}}.
   3. In the "Body" (raw, JSON), specify User B as the receiver:
   1     {
   2       "receiver_id": "{{user_b_id}}"
   3     }
   4. Click "Send". The response will show the call status as initiated.
   5. From the response, save the call_id as a variable named call_id.

  2. User B Answers the Call

  To answer, User B needs their own token. Let's log them in.

   1. Create a login request: POST {{base_url}}/api/auth/login
   2. Body:
   1     {
   2         "email": "userb@example.com",
   3         "password": "password456"
   4     }
   3. From the response, save the token as user_b_token.

  Now, have User B answer:
   1. Create a new request: PATCH {{base_url}}/api/calls/{{call_id}}/answer
   2. Set Authorization to Bearer Token {{user_b_token}}. (This is important—only the receiver can answer).
   3. Click "Send". The call status will change to ongoing.

  3. End the Call

  Either user can end the call. Let's have User A do it.

   1. Create a new request: PATCH {{base_url}}/api/calls/{{call_id}}/end
   2. Set Authorization to Bearer Token {{user_a_token}}.
   3. In the "Body" (raw, JSON), provide a reason:
   1     {
   2       "reason": "caller_hangup"
   3     }
   4. Click "Send". You'll get a response with the final duration and total charge.

  Step 5: Final Verification

   1. Check User A's Final Balance: Rerun the GET /api/wallet request from earlier (with User A's token). The balance should be 450.00
      (assuming a 1-minute call at ₦50/min).
   2. Check User A's Transactions:
       * Create a new request: GET {{base_url}}/api/wallet/transactions
       * Set Authorization to Bearer Token {{user_a_token}}.
       * Click "Send". You will now see two transactions: the initial deposit and the call_charge.

  This flow covers the main functionality of the API. You can continue testing other scenarios like insufficient funds, trying to call
  yourself, or fetching call history.